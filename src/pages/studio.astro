---
// Manual Studio page to bypass Astro integration issues
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sanity Studio - NewsHub</title>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        #sanity {
            height: 100vh;
        }
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background: #f1f3f4;
        }
        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #e1e5e9;
            border-top: 3px solid #2276fc;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="sanity">
        <div class="loading">
            <div>
                <div class="spinner"></div>
                <p>Loading Sanity Studio...</p>
            </div>
        </div>
    </div>

    <script type="module">
        import { createStudio } from 'https://unpkg.com/sanity@^3.0.0/dist/studio.esm.js'
        
        const config = {
            name: 'news-site',
            title: 'News Site',
            projectId: '247bx5rt',
            dataset: 'production',
            plugins: [],
            schema: {
                types: [
                    {
                        name: 'article',
                        title: 'Article',
                        type: 'document',
                        fields: [
                            {
                                name: 'title',
                                title: 'Title',
                                type: 'string',
                                validation: Rule => Rule.required(),
                            },
                            {
                                name: 'slug',
                                title: 'Slug',
                                type: 'slug',
                                options: {
                                    source: 'title',
                                    maxLength: 96,
                                },
                                validation: Rule => Rule.required(),
                            },
                            {
                                name: 'excerpt',
                                title: 'Excerpt',
                                type: 'text',
                                rows: 4,
                            },
                            {
                                name: 'mainImage',
                                title: 'Main image',
                                type: 'image',
                                options: {
                                    hotspot: true,
                                },
                            },
                            {
                                name: 'body',
                                title: 'Body',
                                type: 'array',
                                of: [
                                    {
                                        type: 'block',
                                    },
                                ],
                            },
                            {
                                name: 'author',
                                title: 'Author',
                                type: 'string',
                            },
                            {
                                name: 'publishedAt',
                                title: 'Published at',
                                type: 'datetime',
                            },
                            {
                                name: 'category',
                                title: 'Category',
                                type: 'string',
                                options: {
                                    list: [
                                        { title: 'Technology', value: 'technology' },
                                        { title: 'Politics', value: 'politics' },
                                        { title: 'Sports', value: 'sports' },
                                        { title: 'Entertainment', value: 'entertainment' },
                                        { title: 'Business', value: 'business' },
                                    ],
                                },
                            },
                        ],
                    },
                ],
            },
        }

        try {
            const studio = createStudio({
                config,
                element: document.getElementById('sanity')
            })
        } catch (error) {
            console.error('Error loading Sanity Studio:', error)
            document.getElementById('sanity').innerHTML = `
                <div style="padding: 2rem; text-align: center;">
                    <h2>Studio Loading Error</h2>
                    <p>There was an issue loading Sanity Studio. You can still manage content using:</p>
                    <ul style="text-align: left; max-width: 400px; margin: 0 auto;">
                        <li><a href="https://247bx5rt.sanity.studio" target="_blank">Direct Sanity Studio Link</a></li>
                        <li><a href="https://sanity.io/manage" target="_blank">Sanity Management Console</a></li>
                    </ul>
                    <p style="margin-top: 2rem;">
                        <a href="/news" style="color: #2276fc;">‚Üê Back to News</a>
                    </p>
                </div>
            `
        }
    </script>
</body>
</html>